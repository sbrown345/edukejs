<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>EDukeJS</title>
</head>
<body>
    <script src="libs/webgl-debug.js"></script>
    <script src="libs/lightgl.js"></script>
    <script src="eduke.js"></script>

    <script>
        path("index.htm");

        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'DUKE3D.GRP', true);
        xhr.responseType = 'arraybuffer';

        xhr.onload = function (e) {
            loadGame(new Uint8Array(this.response));
        };

        xhr.send();

        function loadGame(grpData) {
            path("index.htm loaded grp");

            if(grpData.length != hardcoded.grpSize) {
                throw "Incorrect file size for " + (shareware ? "demo" : "full") + " grp";
            }
            
            fileHandles[4] = new Ptr(grpData);
            WinMain(null, null, "-nosetup -map E1L1.MAP", 10);
        }
    </script>
</body>
</html>
