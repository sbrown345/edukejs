<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>EDukeJS</title>
</head>
<body>
    <canvas width="640" height="640"></canvas>

    <script src="eduke.js"></script>

    <script>
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'DUKE3D.GRP', true);
        xhr.responseType = 'arraybuffer';

        xhr.onload = function (e) {
            loadGame(new Uint8Array(this.response));
        };

        xhr.send();

        function loadGame(grpData) {
            if(grpData.length != 11035779) {
                throw "Incorrect file size for demo grp";
            }
            
            fileHandles[4] = grpData;
            WinMain(null, null, "-nosetup -map E1L1.MAP", 10);
        }
    </script>
</body>
</html>
