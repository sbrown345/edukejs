//#include "crc32.h"

var crc32table = new Uint32Array(256);

function initcrc32table(): void {
    // original had a long in the method, so use precalculated
    crc32table[0] = 0;
    crc32table[1] = 1996959894;
    crc32table[2] = 3993919788;
    crc32table[3] = 2567524794;
    crc32table[4] = 124634137;
    crc32table[5] = 1886057615;
    crc32table[6] = 3915621685;
    crc32table[7] = 2657392035;
    crc32table[8] = 249268274;
    crc32table[9] = 2044508324;
    crc32table[10] = 3772115230;
    crc32table[11] = 2547177864;
    crc32table[12] = 162941995;
    crc32table[13] = 2125561021;
    crc32table[14] = 3887607047;
    crc32table[15] = 2428444049;
    crc32table[16] = 498536548;
    crc32table[17] = 1789927666;
    crc32table[18] = 4089016648;
    crc32table[19] = 2227061214;
    crc32table[20] = 450548861;
    crc32table[21] = 1843258603;
    crc32table[22] = 4107580753;
    crc32table[23] = 2211677639;
    crc32table[24] = 325883990;
    crc32table[25] = 1684777152;
    crc32table[26] = 4251122042;
    crc32table[27] = 2321926636;
    crc32table[28] = 335633487;
    crc32table[29] = 1661365465;
    crc32table[30] = 4195302755;
    crc32table[31] = 2366115317;
    crc32table[32] = 997073096;
    crc32table[33] = 1281953886;
    crc32table[34] = 3579855332;
    crc32table[35] = 2724688242;
    crc32table[36] = 1006888145;
    crc32table[37] = 1258607687;
    crc32table[38] = 3524101629;
    crc32table[39] = 2768942443;
    crc32table[40] = 901097722;
    crc32table[41] = 1119000684;
    crc32table[42] = 3686517206;
    crc32table[43] = 2898065728;
    crc32table[44] = 853044451;
    crc32table[45] = 1172266101;
    crc32table[46] = 3705015759;
    crc32table[47] = 2882616665;
    crc32table[48] = 651767980;
    crc32table[49] = 1373503546;
    crc32table[50] = 3369554304;
    crc32table[51] = 3218104598;
    crc32table[52] = 565507253;
    crc32table[53] = 1454621731;
    crc32table[54] = 3485111705;
    crc32table[55] = 3099436303;
    crc32table[56] = 671266974;
    crc32table[57] = 1594198024;
    crc32table[58] = 3322730930;
    crc32table[59] = 2970347812;
    crc32table[60] = 795835527;
    crc32table[61] = 1483230225;
    crc32table[62] = 3244367275;
    crc32table[63] = 3060149565;
    crc32table[64] = 1994146192;
    crc32table[65] = 31158534;
    crc32table[66] = 2563907772;
    crc32table[67] = 4023717930;
    crc32table[68] = 1907459465;
    crc32table[69] = 112637215;
    crc32table[70] = 2680153253;
    crc32table[71] = 3904427059;
    crc32table[72] = 2013776290;
    crc32table[73] = 251722036;
    crc32table[74] = 2517215374;
    crc32table[75] = 3775830040;
    crc32table[76] = 2137656763;
    crc32table[77] = 141376813;
    crc32table[78] = 2439277719;
    crc32table[79] = 3865271297;
    crc32table[80] = 1802195444;
    crc32table[81] = 476864866;
    crc32table[82] = 2238001368;
    crc32table[83] = 4066508878;
    crc32table[84] = 1812370925;
    crc32table[85] = 453092731;
    crc32table[86] = 2181625025;
    crc32table[87] = 4111451223;
    crc32table[88] = 1706088902;
    crc32table[89] = 314042704;
    crc32table[90] = 2344532202;
    crc32table[91] = 4240017532;
    crc32table[92] = 1658658271;
    crc32table[93] = 366619977;
    crc32table[94] = 2362670323;
    crc32table[95] = 4224994405;
    crc32table[96] = 1303535960;
    crc32table[97] = 984961486;
    crc32table[98] = 2747007092;
    crc32table[99] = 3569037538;
    crc32table[100] = 1256170817;
    crc32table[101] = 1037604311;
    crc32table[102] = 2765210733;
    crc32table[103] = 3554079995;
    crc32table[104] = 1131014506;
    crc32table[105] = 879679996;
    crc32table[106] = 2909243462;
    crc32table[107] = 3663771856;
    crc32table[108] = 1141124467;
    crc32table[109] = 855842277;
    crc32table[110] = 2852801631;
    crc32table[111] = 3708648649;
    crc32table[112] = 1342533948;
    crc32table[113] = 654459306;
    crc32table[114] = 3188396048;
    crc32table[115] = 3373015174;
    crc32table[116] = 1466479909;
    crc32table[117] = 544179635;
    crc32table[118] = 3110523913;
    crc32table[119] = 3462522015;
    crc32table[120] = 1591671054;
    crc32table[121] = 702138776;
    crc32table[122] = 2966460450;
    crc32table[123] = 3352799412;
    crc32table[124] = 1504918807;
    crc32table[125] = 783551873;
    crc32table[126] = 3082640443;
    crc32table[127] = 3233442989;
    crc32table[128] = 3988292384;
    crc32table[129] = 2596254646;
    crc32table[130] = 62317068;
    crc32table[131] = 1957810842;
    crc32table[132] = 3939845945;
    crc32table[133] = 2647816111;
    crc32table[134] = 81470997;
    crc32table[135] = 1943803523;
    crc32table[136] = 3814918930;
    crc32table[137] = 2489596804;
    crc32table[138] = 225274430;
    crc32table[139] = 2053790376;
    crc32table[140] = 3826175755;
    crc32table[141] = 2466906013;
    crc32table[142] = 167816743;
    crc32table[143] = 2097651377;
    crc32table[144] = 4027552580;
    crc32table[145] = 2265490386;
    crc32table[146] = 503444072;
    crc32table[147] = 1762050814;
    crc32table[148] = 4150417245;
    crc32table[149] = 2154129355;
    crc32table[150] = 426522225;
    crc32table[151] = 1852507879;
    crc32table[152] = 4275313526;
    crc32table[153] = 2312317920;
    crc32table[154] = 282753626;
    crc32table[155] = 1742555852;
    crc32table[156] = 4189708143;
    crc32table[157] = 2394877945;
    crc32table[158] = 397917763;
    crc32table[159] = 1622183637;
    crc32table[160] = 3604390888;
    crc32table[161] = 2714866558;
    crc32table[162] = 953729732;
    crc32table[163] = 1340076626;
    crc32table[164] = 3518719985;
    crc32table[165] = 2797360999;
    crc32table[166] = 1068828381;
    crc32table[167] = 1219638859;
    crc32table[168] = 3624741850;
    crc32table[169] = 2936675148;
    crc32table[170] = 906185462;
    crc32table[171] = 1090812512;
    crc32table[172] = 3747672003;
    crc32table[173] = 2825379669;
    crc32table[174] = 829329135;
    crc32table[175] = 1181335161;
    crc32table[176] = 3412177804;
    crc32table[177] = 3160834842;
    crc32table[178] = 628085408;
    crc32table[179] = 1382605366;
    crc32table[180] = 3423369109;
    crc32table[181] = 3138078467;
    crc32table[182] = 570562233;
    crc32table[183] = 1426400815;
    crc32table[184] = 3317316542;
    crc32table[185] = 2998733608;
    crc32table[186] = 733239954;
    crc32table[187] = 1555261956;
    crc32table[188] = 3268935591;
    crc32table[189] = 3050360625;
    crc32table[190] = 752459403;
    crc32table[191] = 1541320221;
    crc32table[192] = 2607071920;
    crc32table[193] = 3965973030;
    crc32table[194] = 1969922972;
    crc32table[195] = 40735498;
    crc32table[196] = 2617837225;
    crc32table[197] = 3943577151;
    crc32table[198] = 1913087877;
    crc32table[199] = 83908371;
    crc32table[200] = 2512341634;
    crc32table[201] = 3803740692;
    crc32table[202] = 2075208622;
    crc32table[203] = 213261112;
    crc32table[204] = 2463272603;
    crc32table[205] = 3855990285;
    crc32table[206] = 2094854071;
    crc32table[207] = 198958881;
    crc32table[208] = 2262029012;
    crc32table[209] = 4057260610;
    crc32table[210] = 1759359992;
    crc32table[211] = 534414190;
    crc32table[212] = 2176718541;
    crc32table[213] = 4139329115;
    crc32table[214] = 1873836001;
    crc32table[215] = 414664567;
    crc32table[216] = 2282248934;
    crc32table[217] = 4279200368;
    crc32table[218] = 1711684554;
    crc32table[219] = 285281116;
    crc32table[220] = 2405801727;
    crc32table[221] = 4167216745;
    crc32table[222] = 1634467795;
    crc32table[223] = 376229701;
    crc32table[224] = 2685067896;
    crc32table[225] = 3608007406;
    crc32table[226] = 1308918612;
    crc32table[227] = 956543938;
    crc32table[228] = 2808555105;
    crc32table[229] = 3495958263;
    crc32table[230] = 1231636301;
    crc32table[231] = 1047427035;
    crc32table[232] = 2932959818;
    crc32table[233] = 3654703836;
    crc32table[234] = 1088359270;
    crc32table[235] = 936918000;
    crc32table[236] = 2847714899;
    crc32table[237] = 3736837829;
    crc32table[238] = 1202900863;
    crc32table[239] = 817233897;
    crc32table[240] = 3183342108;
    crc32table[241] = 3401237130;
    crc32table[242] = 1404277552;
    crc32table[243] = 615818150;
    crc32table[244] = 3134207493;
    crc32table[245] = 3453421203;
    crc32table[246] = 1423857449;
    crc32table[247] = 601450431;
    crc32table[248] = 3009837614;
    crc32table[249] = 3294710456;
    crc32table[250] = 1567103746;
    crc32table[251] = 711928724;
    crc32table[252] = 3020668471;
    crc32table[253] = 3272380065;
    crc32table[254] = 1510334235;
    crc32table[255] = 755167117;
}

//uint32_t crc32once(uint8_t *blk, uint32_t len)
//{
//    uint32_t crc;

//    crc32init(&crc);
//    crc32block(&crc, blk, len);
//    return crc32finish(&crc);
//}
