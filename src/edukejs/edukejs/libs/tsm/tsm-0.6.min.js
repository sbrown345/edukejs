var TSM;
(function(k){var d=function(a){"undefined"===typeof a&&(a=null);this.values=new Float32Array(3);a&&(this.xyz=a)};Object.defineProperty(d.prototype,"x",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this.values[2]},set:function(a){this.values[2]=a},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xy",{get:function(){return[this.values[0],this.values[1]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xyz",{get:function(){return[this.values[0],this.values[1],this.values[2]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1];this.values[2]=a[2]},enumerable:!0,configurable:!0});d.prototype.at=function(a){return this.values[a]};d.prototype.reset=
function(){this.z=this.y=this.x=0};d.prototype.copy=function(a){"undefined"===typeof a&&(a=null);a||(a=new d);a.x=this.x;a.y=this.y;a.z=this.z;return a};d.prototype.negate=function(a){"undefined"===typeof a&&(a=null);a||(a=this);a.x=-this.x;a.y=-this.y;a.z=-this.z;return a};d.prototype.equals=function(a,b){"undefined"===typeof b&&(b=EPSILON);return Math.abs(this.x-a.x)>b||Math.abs(this.y-a.y)>b||Math.abs(this.z-a.z)>b?!1:!0};d.prototype.length=function(){return Math.sqrt(this.squaredLength())};d.prototype.squaredLength=
function(){var a=this.x,b=this.y,c=this.z;return a*a+b*b+c*c};d.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};d.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};d.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;return this};d.prototype.divide=function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this};d.prototype.scale=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);b.x*=a;b.y*=a;b.z*=a;return b};d.prototype.normalize=
function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.length();if(1===b)return this;if(0===b)return a.x=0,a.y=0,a.z=0,a;b=1/b;a.x*=b;a.y*=b;a.z*=b;return a};d.prototype.multiplyMat3=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);return a.multiplyVec3(this,b)};d.prototype.multiplyQuat=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);return a.multiplyVec3(this,b)};d.cross=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);var j=a.x,e=a.y,a=a.z,f=b.x,g=
b.y,b=b.z;c.x=e*b-a*g;c.y=a*f-j*b;c.z=j*g-e*f;return c};d.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z};d.distance=function(a,b){return Math.sqrt(this.squaredDistance(a,b))};d.squaredDistance=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=b.z-a.z;return c*c+d*d+e*e};d.direction=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);var j=a.x-b.x,e=a.y-b.y,a=a.z-b.z,b=Math.sqrt(j*j+e*e+a*a);if(0===b)return c.x=0,c.y=0,c.z=0,c;b=1/b;c.x=j*b;c.y=e*b;c.z=a*b;return c};d.interpolate=function(a,b,c,
j){"undefined"===typeof j&&(j=null);j||(j=new d);var e=a.x,f=a.y,a=a.z,g=b.y,h=b.z;j.x=e+c*(b.x-e);j.y=f+c*(g-f);j.z=a+c*(h-a);return j};d.sum=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x+b.x;c.y=a.y+b.y;c.z=a.z+b.z;return c};d.difference=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;return c};d.product=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x*b.x;c.y=a.y*b.y;c.z=a.z*b.z;return c};d.quotient=
function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x/b.x;c.y=a.y/b.y;c.z=a.z/b.z;return c};d.prototype.toQuat=function(a){"undefined"===typeof a&&(a=null);a||(a=new k.quat);var b=new d,c=new d;b.x=Math.cos(0.5*this.x);c.x=Math.sin(0.5*this.x);b.y=Math.cos(0.5*this.y);c.y=Math.sin(0.5*this.y);b.z=Math.cos(0.5*this.z);c.z=Math.sin(0.5*this.z);a.x=c.x*b.y*b.z-b.x*c.y*c.z;a.y=b.x*c.y*b.z+c.x*b.y*c.z;a.z=b.x*b.y*c.z-c.x*c.y*b.z;a.w=b.x*b.y*b.z+c.x*c.y*c.z;return a};d.zero=new d([0,0,0]);
d.up=new d([0,1,0]);d.right=new d([1,0,0]);d.forward=new d([0,0,1]);k.vec3=d})(TSM||(TSM={}));
(function(k){var d=function(a){"undefined"===typeof a&&(a=null);this.values=new Float32Array(4);a&&(this.xyzw=a)};Object.defineProperty(d.prototype,"x",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this.values[2]},set:function(a){this.values[2]=
a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"w",{get:function(){return this.values[3]},set:function(a){this.values[3]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xy",{get:function(){return[this.values[0],this.values[1]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xyz",{get:function(){return[this.values[0],this.values[1],this.values[2]]},set:function(a){this.values[0]=
a[0];this.values[1]=a[1];this.values[2]=a[2]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xyzw",{get:function(){return[this.values[0],this.values[1],this.values[2],this.values[3]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1];this.values[2]=a[2];this.values[3]=a[3]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"r",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"g",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"b",{get:function(){return this.values[2]},set:function(a){this.values[2]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"a",{get:function(){return this.values[3]},set:function(a){this.values[3]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rg",{get:function(){return[this.values[0],this.values[1]]},set:function(a){this.values[0]=
a[0];this.values[1]=a[1]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rgb",{get:function(){return[this.values[0],this.values[1],this.values[2]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1];this.values[2]=a[2]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rgba",{get:function(){return[this.values[0],this.values[1],this.values[2],this.values[3]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1];this.values[2]=a[2];this.values[3]=a[3]},enumerable:!0,
configurable:!0});d.prototype.at=function(a){return this.values[a]};d.prototype.reset=function(){this.w=this.z=this.y=this.x=0};d.prototype.copy=function(a){"undefined"===typeof a&&(a=null);a||(a=new d);a.x=this.x;a.y=this.y;a.z=this.z;a.w=this.w;return a};d.prototype.negate=function(a){"undefined"===typeof a&&(a=null);a||(a=this);a.x=-this.x;a.y=-this.y;a.z=-this.z;a.w=-this.w;return a};d.prototype.equals=function(a,b){"undefined"===typeof b&&(b=EPSILON);return Math.abs(this.x-a.x)>b||Math.abs(this.y-
a.y)>b||Math.abs(this.z-a.z)>b||Math.abs(this.w-a.w)>b?!1:!0};d.prototype.length=function(){return Math.sqrt(this.squaredLength())};d.prototype.squaredLength=function(){var a=this.x,b=this.y,c=this.z,d=this.w;return a*a+b*b+c*c+d*d};d.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this};d.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this};d.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;this.w*=a.w;return this};
d.prototype.divide=function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;this.w/=a.w;return this};d.prototype.scale=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);b.x*=a;b.y*=a;b.z*=a;b.w*=a;return b};d.prototype.normalize=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.length();if(1===b)return this;if(0===b)return a.x*=0,a.y*=0,a.z*=0,a.w*=0,a;b=1/b;a.x*=b;a.y*=b;a.z*=b;a.w*=b;return a};d.prototype.multiplyMat4=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);
return a.multiplyVec4(this,b)};d.interpolate=function(a,b,c,j){"undefined"===typeof j&&(j=null);j||(j=new d);j.x=a.x+c*(b.x-a.x);j.y=a.y+c*(b.y-a.y);j.z=a.z+c*(b.z-a.z);j.w=a.w+c*(b.w-a.w);return j};d.sum=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x+b.x;c.y=a.y+b.y;c.z=a.z+b.z;c.w=a.w+b.w;return c};d.difference=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x-b.x;c.y=a.y-b.y;c.z=a.z-b.z;c.w=a.w-b.w;return c};d.product=function(a,b,c){"undefined"===typeof c&&
(c=null);c||(c=new d);c.x=a.x*b.x;c.y=a.y*b.y;c.z=a.z*b.z;c.w=a.w*b.w;return c};d.quotient=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x/b.x;c.y=a.y/b.y;c.z=a.z/b.z;c.w=a.w/b.w;return c};d.zero=new d([0,0,0,1]);k.vec4=d})(TSM||(TSM={}));
(function(k){var d=function(a){"undefined"===typeof a&&(a=null);this.values=new Float32Array(4);a&&this.init(a)};d.prototype.at=function(a){return this.values[a]};d.prototype.init=function(a){for(var b=0;4>b;b++)this.values[b]=a[b];return this};d.prototype.reset=function(){for(var a=0;4>a;a++)this.values[a]=0};d.prototype.copy=function(a){"undefined"===typeof a&&(a=null);a||(a=new d);for(var b=0;4>b;b++)a.values[b]=this.values[b];return a};d.prototype.all=function(){for(var a=[],b=0;4>b;b++)a[b]=
this.values[b];return a};d.prototype.row=function(a){return[this.values[2*a+0],this.values[2*a+1]]};d.prototype.col=function(a){return[this.values[a],this.values[a+2]]};d.prototype.equals=function(a,b){"undefined"===typeof b&&(b=EPSILON);for(var c=0;4>c;c++)if(Math.abs(this.values[c]-a.at(c))>b)return!1;return!0};d.prototype.determinant=function(){return this.values[0]*this.values[3]-this.values[2]*this.values[1]};d.prototype.setIdentity=function(){this.values[0]=1;this.values[1]=0;this.values[2]=
0;this.values[3]=1;return this};d.prototype.transpose=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.values[1];a!=this&&(a.values[0]=this.values[0],a.values[3]=this.values[3]);a.values[1]=this.values[2];a.values[2]=b;return a};d.prototype.inverse=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.determinant();b?(b=1/b,a.values[0]=b*this.values[3],a.values[1]=b*-this.values[1],a.values[2]=b*-this.values[2],a.values[3]=b*this.values[0]):a!=this&&this.copy(a);return a};
d.prototype.multiply=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);var c=this.values[0],d=this.values[1],e=this.values[2],f=this.values[3];b.values[0]=c*a.at(0)+d*a.at(2);b.values[1]=c*a.at(1)+d*a.at(3);b.values[2]=e*a.at(0)+f*a.at(2);b.values[3]=e*a.at(1)+f*a.at(3);return b};d.prototype.rotate=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);var c=this.values[0],d=this.values[1],e=this.values[2],f=this.values[3],g=Math.sin(a),h=Math.cos(a);b.values[0]=c*h+d*g;b.values[1]=c*
-g+d*h;b.values[2]=e*h+f*g;b.values[3]=e*-g+f*h;return b};d.prototype.multiplyVec2=function(a,b){"undefined"===typeof b&&(b=null);b||(b=new k.vec2);var c=a.x,d=a.y;b.x=c*this.values[0]+d*this.values[1];b.y=c*this.values[2]+d*this.values[3];return b};d.prototype.scale=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);var c=this.values[1],d=this.values[2],e=this.values[3],f=a.x,g=a.y;b.values[0]=this.values[0]*f;b.values[1]=c*g;b.values[2]=d*f;b.values[3]=e*g;return b};d.product=function(a,
b,c){"undefined"===typeof c&&(c=null);c||(c=new d);var j=a.at(0),e=a.at(1),f=a.at(2),a=a.at(3);c.values[0]=j*b.at(0)+e*b.at(2);c.values[1]=j*b.at(1)+e*b.at(3);c.values[2]=f*b.at(0)+a*b.at(2);c.values[3]=f*b.at(1)+a*b.at(3);return c};d.identity=(new d).setIdentity();k.mat2=d})(TSM||(TSM={}));
(function(k){var d=function(a){"undefined"===typeof a&&(a=null);this.values=new Float32Array(9);a&&this.init(a)};d.prototype.at=function(a){return this.values[a]};d.prototype.init=function(a){for(var b=0;9>b;b++)this.values[b]=a[b];return this};d.prototype.reset=function(){for(var a=0;9>a;a++)this.values[a]=0};d.prototype.copy=function(a){"undefined"===typeof a&&(a=null);a||(a=new d);for(var b=0;9>b;b++)a.values[b]=this.values[b];return a};d.prototype.all=function(){for(var a=[],b=0;9>b;b++)a[b]=
this.values[b];return a};d.prototype.row=function(a){return[this.values[3*a+0],this.values[3*a+1],this.values[3*a+2]]};d.prototype.col=function(a){return[this.values[a],this.values[a+3],this.values[a+6]]};d.prototype.equals=function(a,b){"undefined"===typeof b&&(b=EPSILON);for(var c=0;9>c;c++)if(Math.abs(this.values[c]-a.at(c))>b)return!1;return!0};d.prototype.determinant=function(){var a=this.values[3],b=this.values[4],c=this.values[5],d=this.values[6],e=this.values[7],f=this.values[8];return this.values[0]*
(f*b-c*e)+this.values[1]*(-f*a+c*d)+this.values[2]*(e*a-b*d)};d.prototype.setIdentity=function(){this.values[0]=1;this.values[1]=0;this.values[2]=0;this.values[3]=0;this.values[4]=1;this.values[5]=0;this.values[6]=0;this.values[7]=0;this.values[8]=1;return this};d.prototype.transpose=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.values[1],c=this.values[2],d=this.values[5];a!=this&&(a.values[0]=this.values[0],a.values[4]=this.values[4],a.values[8]=this.values[8]);a.values[1]=
this.values[3];a.values[2]=this.values[6];a.values[3]=b;a.values[5]=this.values[7];a.values[6]=c;a.values[7]=d;return a};d.prototype.inverse=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.values[0],c=this.values[1],d=this.values[2],e=this.values[3],f=this.values[4],g=this.values[5],h=this.values[6],i=this.values[7],l=this.values[8],p=l*f-g*i,n=-l*e+g*h,w=i*e-f*h,m=b*p+c*n+d*w;m?(m=1/m,a.values[0]=p*m,a.values[1]=(-l*c+d*i)*m,a.values[2]=(g*c-d*f)*m,a.values[3]=n*m,a.values[4]=
(l*b-d*h)*m,a.values[5]=(-g*b+d*e)*m,a.values[6]=w*m,a.values[7]=(-i*b+c*h)*m,a.values[8]=(f*b-c*e)*m):a!=this&&this.copy(a);return a};d.prototype.multiply=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);var c=this.values[0],d=this.values[1],e=this.values[2],f=this.values[3],g=this.values[4],h=this.values[5],i=this.values[6],l=this.values[7],p=this.values[8],n=a.at(0),w=a.at(1),m=a.at(2),x=a.at(3),u=a.at(4),k=a.at(5),v=a.at(6),q=a.at(7),r=a.at(8);b.values[0]=n*c+w*f+m*i;b.values[1]=n*d+
w*g+m*l;b.values[2]=n*e+w*h+m*p;b.values[3]=x*c+u*f+k*i;b.values[4]=x*d+u*g+k*l;b.values[5]=x*e+u*h+k*p;b.values[6]=v*c+q*f+r*i;b.values[7]=v*d+q*g+r*l;b.values[8]=v*e+q*h+r*p;return b};d.prototype.multiplyVec2=function(a,b){"undefined"===typeof b&&(b=null);b||(b=new k.vec2);var c=a.x,d=a.y;b.x=c*this.values[0]+d*this.values[3]+this.values[6];b.y=c*this.values[1]+d*this.values[4]+this.values[7];return b};d.prototype.multiplyVec3=function(a,b){"undefined"===typeof b&&(b=null);b||(b=new k.vec3);var c=
a.x,d=a.y,e=a.z;b.x=c*this.values[0]+d*this.values[3]+e*this.values[6];b.y=c*this.values[1]+d*this.values[4]+e*this.values[7];b.z=c*this.values[2]+d*this.values[5]+e*this.values[8];return b};d.prototype.toMat4=function(a){"undefined"===typeof a&&(a=null);a||(a=new k.mat4);a.init([this.values[0],this.values[1],this.values[2],0,this.values[3],this.values[4],this.values[5],0,this.values[6],this.values[7],this.values[8],0,0,0,0,1]);return a};d.prototype.toQuat=function(a){"undefined"===typeof a&&(a=null);
a||(a=new k.quat);var b=this.values[0],c=this.values[1],d=this.values[2],e=this.values[3],f=this.values[4],g=this.values[5],h=this.values[6],i=this.values[7],l=this.values[8],p=b-f-l,n=f-b-l,w=l-b-f,m=0,b=b+f+l;p>b&&(b=p,m=1);n>b&&(b=n,m=2);w>b&&(b=w,m=3);p=0.5*Math.sqrt(b+1);n=0.25/p;switch(m){case 0:a.w=p;a.x=(g-i)*n;a.y=(h-d)*n;a.z=(c-e)*n;break;case 1:a.w=(g-i)*n;a.x=p;a.y=(c+e)*n;a.z=(h+d)*n;break;case 2:a.w=(h-d)*n;a.x=(c+e)*n;a.y=p;a.z=(g+i)*n;break;case 3:a.w=(c-e)*n,a.x=(h+d)*n,a.y=(g+i)*
n,a.z=p}return a};d.prototype.rotate=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=this);var d=b.x,e=b.y,b=b.z,f=Math.sqrt(d*d+e*e+b*b);if(f){1!==f&&(f=1/f,d*=f,e*=f,b*=f);var g=Math.sin(a),h=Math.cos(a),i=1-h,a=this.values[0],f=this.values[1],l=this.values[2],p=this.values[4],n=this.values[5],w=this.values[6],m=this.values[8],k=this.values[9],u=this.values[10],y=d*d*i+h,v=e*d*i+b*g,q=b*d*i-e*g,r=d*e*i-b*g,s=e*e*i+h,t=b*e*i+d*g,A=d*b*i+e*g,d=e*b*i-d*g,e=b*b*i+h;c.values[0]=a*y+p*v+m*q;c.values[1]=
f*y+n*v+k*q;c.values[2]=l*y+w*v+u*q;c.values[3]=a*r+p*s+m*t;c.values[4]=f*r+n*s+k*t;c.values[5]=l*r+w*s+u*t;c.values[6]=a*A+p*d+m*e;c.values[7]=f*A+n*d+k*e;c.values[8]=l*A+w*d+u*e}else c!=this&&this.copy(c);return c};d.product=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=this);var d=a.at(0),e=a.at(1),f=a.at(2),g=a.at(3),h=a.at(4),i=a.at(5),l=a.at(6),p=a.at(7),a=a.at(8),n=b.at(0),w=b.at(1),m=b.at(2),k=b.at(3),u=b.at(4),y=b.at(5),v=b.at(6),q=b.at(7),b=b.at(8);c.init([n*d+w*g+m*l,n*e+w*h+m*
p,n*f+w*i+m*a,k*d+u*g+y*l,k*e+u*h+y*p,k*f+u*i+y*a,v*d+q*g+b*l,v*e+q*h+b*p,v*f+q*i+b*a]);return c};d.identity=(new d).setIdentity();k.mat3=d})(TSM||(TSM={}));
(function(k){var d=function(a){"undefined"===typeof a&&(a=null);this.values=new Float32Array(16);a&&this.init(a)};d.prototype.at=function(a){return this.values[a]};d.prototype.init=function(a){for(var b=0;16>b;b++)this.values[b]=a[b];return this};d.prototype.reset=function(){for(var a=0;16>a;a++)this.values[a]=0};d.prototype.copy=function(a){"undefined"===typeof a&&(a=null);a||(a=new d);for(var b=0;16>b;b++)a.values[b]=this.values[b];return a};d.prototype.all=function(){for(var a=[],b=0;16>b;b++)a[b]=
this.values[b];return a};d.prototype.row=function(a){return[this.values[4*a+0],this.values[4*a+1],this.values[4*a+2],this.values[4*a+3]]};d.prototype.col=function(a){return[this.values[a],this.values[a+4],this.values[a+8],this.values[a+12]]};d.prototype.equals=function(a,b){"undefined"===typeof b&&(b=EPSILON);for(var c=0;16>c;c++)if(Math.abs(this.values[c]-a.at(c))>b)return!1;return!0};d.prototype.determinant=function(){var a=this.values[0],b=this.values[1],c=this.values[2],d=this.values[3],e=this.values[4],
f=this.values[5],g=this.values[6],h=this.values[7],i=this.values[8],l=this.values[9],p=this.values[10],n=this.values[11],k=this.values[12],m=this.values[13],x=this.values[14],u=this.values[15];return(a*f-b*e)*(p*u-n*x)-(a*g-c*e)*(l*u-n*m)+(a*h-d*e)*(l*x-p*m)+(b*g-c*f)*(i*u-n*k)-(b*h-d*f)*(i*x-p*k)+(c*h-d*g)*(i*m-l*k)};d.prototype.setIdentity=function(){this.values[0]=1;this.values[1]=0;this.values[2]=0;this.values[3]=0;this.values[4]=0;this.values[5]=1;this.values[6]=0;this.values[7]=0;this.values[8]=
0;this.values[9]=0;this.values[10]=1;this.values[11]=0;this.values[12]=0;this.values[13]=0;this.values[14]=0;this.values[15]=1;return this};d.prototype.transpose=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.values[1],c=this.values[2],d=this.values[3],e=this.values[6],f=this.values[7],g=this.values[11];a!=this&&(a.values[0]=this.values[0],a.values[5]=this.values[5],a.values[10]=this.values[10],a.values[15]=this.values[15]);a.values[1]=this.values[4];a.values[2]=this.values[8];
a.values[3]=this.values[12];a.values[4]=b;a.values[6]=this.values[9];a.values[7]=this.values[13];a.values[8]=c;a.values[9]=e;a.values[11]=this.values[14];a.values[12]=d;a.values[13]=f;a.values[14]=g;return a};d.prototype.inverse=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.values[0],c=this.values[1],d=this.values[2],e=this.values[3],f=this.values[4],g=this.values[5],h=this.values[6],i=this.values[7],l=this.values[8],p=this.values[9],n=this.values[10],k=this.values[11],m=this.values[12],
x=this.values[13],u=this.values[14],y=this.values[15],v=b*g-c*f,q=b*h-d*f,r=b*i-e*f,s=c*h-d*g,t=c*i-e*g,A=d*i-e*h,B=l*x-p*m,C=l*u-n*m,D=l*y-k*m,E=p*u-n*x,F=p*y-k*x,G=n*y-k*u,z=v*G-q*F+r*E+s*D-t*C+A*B;z?(z=1/z,a.values[0]=(g*G-h*F+i*E)*z,a.values[1]=(-c*G+d*F-e*E)*z,a.values[2]=(x*A-u*t+y*s)*z,a.values[3]=(-p*A+n*t-k*s)*z,a.values[4]=(-f*G+h*D-i*C)*z,a.values[5]=(b*G-d*D+e*C)*z,a.values[6]=(-m*A+u*r-y*q)*z,a.values[7]=(l*A-n*r+k*q)*z,a.values[8]=(f*F-g*D+i*B)*z,a.values[9]=(-b*F+c*D-e*B)*z,a.values[10]=
(m*t-x*r+y*v)*z,a.values[11]=(-l*t+p*r-k*v)*z,a.values[12]=(-f*E+g*C-h*B)*z,a.values[13]=(b*E-c*C+d*B)*z,a.values[14]=(-m*s+x*q-u*v)*z,a.values[15]=(l*s-p*q+n*v)*z):a!=this&&this.copy(a);return a};d.prototype.multiply=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);var c=this.values[0],d=this.values[1],e=this.values[2],f=this.values[3],g=this.values[4],h=this.values[5],i=this.values[6],l=this.values[7],p=this.values[8],n=this.values[9],k=this.values[10],m=this.values[11],x=this.values[12],
u=this.values[13],y=this.values[14],v=this.values[15],q=a.at(0),r=a.at(1),s=a.at(2),t=a.at(3);b.values[0]=q*c+r*g+s*p+t*x;b.values[1]=q*d+r*h+s*n+t*u;b.values[2]=q*e+r*i+s*k+t*y;b.values[3]=q*f+r*l+s*m+t*v;q=a.at(4);r=a.at(5);s=a.at(6);t=a.at(7);b.values[4]=q*c+r*g+s*p+t*x;b.values[5]=q*d+r*h+s*n+t*u;b.values[6]=q*e+r*i+s*k+t*y;b.values[7]=q*f+r*l+s*m+t*v;q=a.at(8);r=a.at(9);s=a.at(10);t=a.at(11);b.values[8]=q*c+r*g+s*p+t*x;b.values[9]=q*d+r*h+s*n+t*u;b.values[10]=q*e+r*i+s*k+t*y;b.values[11]=q*f+
r*l+s*m+t*v;q=a.at(12);r=a.at(13);s=a.at(14);t=a.at(15);b.values[12]=q*c+r*g+s*p+t*x;b.values[13]=q*d+r*h+s*n+t*u;b.values[14]=q*e+r*i+s*k+t*y;b.values[15]=q*f+r*l+s*m+t*v;return b};d.prototype.multiplyVec3=function(a,b){"undefined"===typeof b&&(b=null);b||(b=new k.vec3);var c=a.x,d=a.y,e=a.z;b.x=this.values[0]*c+this.values[4]*d+this.values[8]*e+this.values[12];b.y=this.values[1]*c+this.values[5]*d+this.values[9]*e+this.values[13];b.z=this.values[2]*c+this.values[6]*d+this.values[10]*e+this.values[14];
return b};d.prototype.multiplyVec4=function(a,b){"undefined"===typeof b&&(b=null);b||(b=new k.vec4);var c=a.x,d=a.y,e=a.z,f=a.w;b.x=this.values[0]*c+this.values[4]*d+this.values[8]*e+this.values[12]*f;b.y=this.values[1]*c+this.values[5]*d+this.values[9]*e+this.values[13]*f;b.z=this.values[2]*c+this.values[6]*d+this.values[10]*e+this.values[14]*f;b.w=this.values[3]*c+this.values[7]*d+this.values[11]*e+this.values[15]*f;return b};d.prototype.toMat3=function(a){"undefined"===typeof a&&(a=null);a||(a=
new k.mat3);a.init([this.values[0],this.values[1],this.values[2],this.values[4],this.values[5],this.values[6],this.values[8],this.values[9],this.values[10]]);return a};d.prototype.toInverseMat3=function(a){"undefined"===typeof a&&(a=null);a||(a=new k.mat3);var b=this.values[0],c=this.values[1],d=this.values[2],e=this.values[4],f=this.values[5],g=this.values[6],h=this.values[8],i=this.values[9],l=this.values[10],p=l*f-g*i,n=-l*e+g*h,w=i*e-f*h,m=b*p+c*n+d*w;m?(m=1/m,a.init([p*m,(-l*c+d*i)*m,(g*c-d*
f)*m,n*m,(l*b-d*h)*m,(-g*b+d*e)*m,w*m,(-i*b+c*h)*m,(f*b-c*e)*m])):this.toMat3(a);return a};d.prototype.translate=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);var c=a.x,d=a.y,e=a.z;b!=this&&(b.values[0]=this.values[0],b.values[1]=this.values[1],b.values[2]=this.values[2],b.values[3]=this.values[3],b.values[4]=this.values[4],b.values[5]=this.values[5],b.values[6]=this.values[6],b.values[7]=this.values[7],b.values[8]=this.values[8],b.values[9]=this.values[9],b.values[10]=this.values[10],
b.values[11]=this.values[11]);b.values[12]=this.values[12]+this.values[0]*c+this.values[4]*d+this.values[8]*e;b.values[13]=this.values[13]+this.values[1]*c+this.values[5]*d+this.values[9]*e;b.values[14]=this.values[14]+this.values[2]*c+this.values[6]*d+this.values[10]*e;b.values[15]=this.values[15]+this.values[3]*c+this.values[7]*d+this.values[11]*e;return b};d.prototype.scale=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);var c=a.x,d=a.y,e=a.z;b!=this&&(b.values[12]=this.values[12],b.values[13]=
this.values[13],b.values[14]=this.values[14],b.values[15]=this.values[15]);b.values[0]=this.values[0]*c;b.values[1]=this.values[1]*c;b.values[2]=this.values[2]*c;b.values[3]=this.values[3]*c;b.values[4]=this.values[4]*d;b.values[5]=this.values[5]*d;b.values[6]=this.values[6]*d;b.values[7]=this.values[7]*d;b.values[8]=this.values[8]*e;b.values[9]=this.values[9]*e;b.values[10]=this.values[10]*e;b.values[11]=this.values[11]*e;return b};d.prototype.rotate=function(a,b,c){"undefined"===typeof c&&(c=null);
c||(c=this);var d=b.x,e=b.y,b=b.z,f=Math.sqrt(d*d+e*e+b*b);if(!f)return c!=this&&this.copy(c),c;1!==f&&(f=1/f,d*=f,e*=f,b*=f);var g=Math.sin(a),h=Math.cos(a),i=1-h,a=this.values[0],f=this.values[1],l=this.values[2],k=this.values[3],n=this.values[4],w=this.values[5],m=this.values[6],x=this.values[7],u=this.values[8],y=this.values[9],v=this.values[10],q=this.values[11],r=d*d*i+h,s=e*d*i+b*g,t=b*d*i-e*g,A=d*e*i-b*g,B=e*e*i+h,C=b*e*i+d*g,D=d*b*i+e*g,d=e*b*i-d*g,e=b*b*i+h;c.values[0]=a*r+n*s+u*t;c.values[1]=
f*r+w*s+y*t;c.values[2]=l*r+m*s+v*t;c.values[3]=k*r+x*s+q*t;c.values[4]=a*A+n*B+u*C;c.values[5]=f*A+w*B+y*C;c.values[6]=l*A+m*B+v*C;c.values[7]=k*A+x*B+q*C;c.values[8]=a*D+n*d+u*e;c.values[9]=f*D+w*d+y*e;c.values[10]=l*D+m*d+v*e;c.values[11]=k*D+x*d+q*e;c!=this&&(c.values[12]=this.values[12],c.values[13]=this.values[13],c.values[14]=this.values[14],c.values[15]=this.values[15]);return c};d.frustum=function(a,b,c,j,e,f,g){"undefined"===typeof g&&(g=null);g||(g=new d);var h=b-a,i=j-c,l=f-e;g.init([2*
e/h,0,0,0,0,2*e/i,0,0,(b+a)/h,(j+c)/i,-(f+e)/l,-1,0,0,-(2*f*e)/l,0]);return g};d.perspective=function(a,b,c,j,e){"undefined"===typeof e&&(e=null);e||(e=new d);a=c*Math.tan(a*Math.PI/360);b*=a;return d.frustum(-b,b,-a,a,c,j,e)};d.orthographic=function(a,b,c,j,e,f,g){"undefined"===typeof g&&(g=null);g||(g=new d);var h=b-a,i=j-c,l=f-e;g.init([2/h,0,0,0,0,2/i,0,0,0,0,-2/l,0,-(a+b)/h,-(j+c)/i,-(f+e)/l,1]);return g};d.lookAt=function(a,b,c,j){"undefined"===typeof c&&(c=k.vec3.up);"undefined"===typeof j&&
(j=null);j||(j=new d);if(a.equals(b))return j.setIdentity();var b=k.vec3.difference(a,b).normalize(),c=k.vec3.cross(c,b).normalize(),e=k.vec3.cross(b,c).normalize();j.init([c.x,e.x,b.x,0,c.y,e.y,b.y,0,c.z,e.z,b.z,0,-k.vec3.dot(c,a),-k.vec3.dot(e,a),-k.vec3.dot(b,a),1]);return j};d.product=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);var j=a.at(0),e=a.at(1),f=a.at(2),g=a.at(3),h=a.at(4),i=a.at(5),l=a.at(6),k=a.at(7),n=a.at(8),w=a.at(9),m=a.at(10),x=a.at(11),u=a.at(12),y=a.at(13),v=
a.at(14),a=a.at(15),q=b.at(0),r=b.at(1),s=b.at(2),t=b.at(3),A=b.at(4),B=b.at(5),C=b.at(6),D=b.at(7),E=b.at(8),F=b.at(9),G=b.at(10),z=b.at(11),H=b.at(12),I=b.at(13),J=b.at(14),b=b.at(15);c.init([q*j+r*h+s*n+t*u,q*e+r*i+s*w+t*y,q*f+r*l+s*m+t*v,q*g+r*k+s*x+t*a,A*j+B*h+C*n+D*u,A*e+B*i+C*w+D*y,A*f+B*l+C*m+D*v,A*g+B*k+C*x+D*a,E*j+F*h+G*n+z*u,E*e+F*i+G*w+z*y,E*f+F*l+G*m+z*v,E*g+F*k+G*x+z*a,H*j+I*h+J*n+b*u,H*e+I*i+J*w+b*y,H*f+I*l+J*m+b*v,H*g+I*k+J*x+b*a]);return c};d.identity=(new d).setIdentity();k.mat4=
d})(TSM||(TSM={}));
(function(k){var d=function(a){"undefined"===typeof a&&(a=null);this.values=new Float32Array(4);a&&(this.xyzw=a)};Object.defineProperty(d.prototype,"x",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"z",{get:function(){return this.values[2]},set:function(a){this.values[2]=a},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"w",{get:function(){return this.values[3]},set:function(a){this.values[3]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xy",{get:function(){return[this.values[0],this.values[1]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xyz",{get:function(){return[this.values[0],this.values[1],this.values[2]]},set:function(a){this.values[0]=a[0];
this.values[1]=a[1];this.values[2]=a[2]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xyzw",{get:function(){return[this.values[0],this.values[1],this.values[2],this.values[3]]},set:function(a){this.values[0]=a[0];this.values[1]=a[1];this.values[2]=a[2];this.values[3]=a[3]},enumerable:!0,configurable:!0});d.prototype.at=function(a){return this.values[a]};d.prototype.reset=function(){for(var a=0;4>a;a++)this.values[a]=0};d.prototype.copy=function(a){"undefined"===typeof a&&(a=
null);a||(a=new d);for(var b=0;4>b;b++)a.values[b]=this.values[b];return a};d.prototype.roll=function(){var a=this.x,b=this.y,c=this.z,d=this.w;return Math.atan2(2*(a*b+d*c),d*d+a*a-b*b-c*c)};d.prototype.pitch=function(){var a=this.x,b=this.y,c=this.z,d=this.w;return Math.atan2(2*(b*c+d*a),d*d-a*a-b*b+c*c)};d.prototype.yaw=function(){return Math.asin(2*(this.x*this.z-this.w*this.y))};d.prototype.equals=function(a,b){"undefined"===typeof b&&(b=EPSILON);for(var c=0;4>c;c++)if(Math.abs(this.values[c]-
a.at(c))>b)return!1;return!0};d.prototype.setIdentity=function(){this.z=this.y=this.x=0;this.w=1;return this};d.prototype.calculateW=function(){var a=this.x,b=this.y,c=this.z;this.w=-Math.sqrt(Math.abs(1-a*a-b*b-c*c));return this};d.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w};d.prototype.inverse=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=d.dot(this,this);if(!b){for(b=0;4>b;b++)a.values[b]=0;return a}b=b?1/b:0;a.x=this.x*-b;a.y=this.y*-b;a.z=this.z*-b;a.w=this.w*b;
return a};d.prototype.conjugate=function(a){"undefined"===typeof a&&(a=null);a||(a=this);a.x=-1*this.x;a.y=-1*this.y;a.z=-1*this.z;return a};d.prototype.length=function(){var a=this.x,b=this.y,c=this.z,d=this.w;return Math.sqrt(a*a+b*b+c*c+d*d)};d.prototype.normalize=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.x,c=this.y,d=this.z,e=this.w,f=Math.sqrt(b*b+c*c+d*d+e*e);if(!f){for(b=0;4>b;b++)a.values[b]=0;return a}f=1/f;a.x=b*f;a.y=c*f;a.z=d*f;a.w=e*f;return a};d.prototype.add=
function(a){for(var b=0;4>b;b++)this.values[b]+=a.values[b];return this};d.prototype.multiply=function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.x,g=a.y,h=a.z,a=a.w;this.x=b*a+e*f+c*h-d*g;this.y=c*a+e*g+d*f-b*h;this.z=d*a+e*h+b*g-c*f;this.w=e*a-b*f-c*g-d*h;return this};d.prototype.multiplyVec3=function(a,b){"undefined"===typeof b&&(b=null);b||(b=new k.vec3);var c=a.x,d=a.y,e=a.z,f=this.x,g=this.y,h=this.z,i=this.w,l=i*c+g*e-h*d,p=i*d+h*c-f*e,n=i*e+f*d-g*c,c=-f*c-g*d-h*e;b.x=l*i+c*-f+p*-h-n*-g;
b.y=p*i+c*-g+n*-f-l*-h;b.z=n*i+c*-h+l*-g-p*-f;return b};d.prototype.toMat3=function(a){"undefined"===typeof a&&(a=null);a||(a=new k.mat3);var b=this.x,c=this.y,d=this.z,e=this.w,f=b+b,g=c+c,h=d+d,i=b*f,l=b*g,b=b*h,p=c*g,c=c*h,d=d*h,f=e*f,g=e*g,e=e*h;a.init([1-(p+d),l+e,b-g,l-e,1-(i+d),c+f,b+g,c-f,1-(i+p)]);return a};d.prototype.toMat4=function(a){"undefined"===typeof a&&(a=null);a||(a=new k.mat4);var b=this.x,c=this.y,d=this.z,e=this.w,f=b+b,g=c+c,h=d+d,i=b*f,l=b*g,b=b*h,p=c*g,c=c*h,d=d*h,f=e*f,g=
e*g,e=e*h;a.init([1-(p+d),l+e,b-g,0,l-e,1-(i+d),c+f,0,b+g,c-f,1-(i+p),0,0,0,0,1]);return a};d.sum=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x+b.x;c.y=a.y+b.y;c.z=a.z+b.z;c.w=a.w+b.w;return c};d.product=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);var j=a.x,e=a.y,f=a.z,a=a.w,g=b.x,h=b.y,i=b.z,b=b.w;c.x=j*b+a*g+e*i-f*h;c.y=e*b+a*h+f*g-j*i;c.z=f*b+a*i+j*h-e*g;c.w=a*b-j*g-e*h-f*i;return c};d.interpolate=function(a,b,c,j){"undefined"===typeof j&&(j=null);j||(j=
new d);var e=a.x*b.x+a.y*b.y+a.z*b.z+a.w*b.w;if(1<=Math.abs(e))return a.copy(j),j;var f=Math.acos(e),g=Math.sqrt(1-e*e);if(0.0010>Math.abs(g))return j.x=0.5*a.x+0.5*b.x,j.y=0.5*a.y+0.5*b.y,j.z=0.5*a.z+0.5*b.z,j.w=0.5*a.w+0.5*b.w,j;e=Math.sin((1-c)*f)/g;c=Math.sin(c*f)/g;j.x=a.x*e+b.x*c;j.y=a.y*e+b.y*c;j.z=a.z*e+b.z*c;j.w=a.w*e+b.w*c;return j};d.identity=(new d).setIdentity();k.quat=d})(TSM||(TSM={}));var EPSILON=1E-6;
(function(k){var d=function(a){"undefined"===typeof a&&(a=null);this.values=new Float32Array(2);a&&(this.xy=a)};Object.defineProperty(d.prototype,"x",{get:function(){return this.values[0]},set:function(a){this.values[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this.values[1]},set:function(a){this.values[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"xy",{get:function(){return[this.values[0],this.values[1]]},set:function(a){this.values[0]=
a[0];this.values[1]=a[1]},enumerable:!0,configurable:!0});d.prototype.at=function(a){return this.values[a]};d.prototype.reset=function(){this.y=this.x=0};d.prototype.copy=function(a){"undefined"===typeof a&&(a=null);a||(a=new d);a.x=this.x;a.y=this.y;return a};d.prototype.negate=function(a){"undefined"===typeof a&&(a=null);a||(a=this);a.x=-this.x;a.y=-this.y;return a};d.prototype.equals=function(a,b){"undefined"===typeof b&&(b=EPSILON);return Math.abs(this.x-a.x)>b||Math.abs(this.y-a.y)>b?!1:!0};
d.prototype.length=function(){return Math.sqrt(this.squaredLength())};d.prototype.squaredLength=function(){var a=this.x,b=this.y;return a*a+b*b};d.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};d.prototype.subtract=function(a){this.x-=a.x;this.y-=a.y;return this};d.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};d.prototype.divide=function(a){this.x/=a.x;this.y/=a.y;return this};d.prototype.scale=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);b.x*=a;
b.y*=a;return b};d.prototype.normalize=function(a){"undefined"===typeof a&&(a=null);a||(a=this);var b=this.length();if(1===b)return this;if(0===b)return a.x=0,a.y=0,a;b=1/b;a.x*=b;a.y*=b;return a};d.prototype.multiplyMat2=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);return a.multiplyVec2(this,b)};d.prototype.multiplyMat3=function(a,b){"undefined"===typeof b&&(b=null);b||(b=this);return a.multiplyVec2(this,b)};d.cross=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new k.vec3);
a=a.x*b.y-a.y*b.x;c.x=0;c.y=0;c.z=a;return c};d.dot=function(a,b){return a.x*b.x+a.y*b.y};d.distance=function(a,b){return Math.sqrt(this.squaredDistance(a,b))};d.squaredDistance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d};d.direction=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);var j=a.x-b.x,a=a.y-b.y,b=Math.sqrt(j*j+a*a);if(0===b)return c.x=0,c.y=0,c;b=1/b;c.x=j*b;c.y=a*b;return c};d.interpolate=function(a,b,c,j){"undefined"===typeof j&&(j=null);j||(j=new d);var e=a.x,
a=a.y,f=b.y;j.x=e+c*(b.x-e);j.y=a+c*(f-a);return j};d.sum=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x+b.x;c.y=a.y+b.y;return c};d.difference=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x-b.x;c.y=a.y-b.y;return c};d.product=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x*b.x;c.y=a.y*b.y;return c};d.quotient=function(a,b,c){"undefined"===typeof c&&(c=null);c||(c=new d);c.x=a.x/b.x;c.y=a.y/b.y;return c};d.zero=new d([0,0]);k.vec2=
d})(TSM||(TSM={}));
